<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vitrine — Deck fluide (4 encarts)</title>
<style>
  :root{
    --bg:#f7f8fa; --ink:#0f1115; --muted:#6b7280; --card:#ffffff; --ring:#e5e7eb;
    --acc:#0ea5a5; --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.08);
  }
  @media (prefers-color-scheme: dark){
    :root{ --bg:#0b0d11; --ink:#eef2f7; --muted:#9aa7b8; --card:#0f141b; --ring:#1f2937; --shadow:0 10px 30px rgba(0,0,0,.35) }
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,"Noto Sans",sans-serif}
  body{overscroll-behavior:none}

  .app{min-height:100dvh; display:flex; flex-direction:column}

  /* Topbar compacte */
  .topbar{display:flex; align-items:center; justify-content:space-between; gap:12px;
    padding:12px clamp(12px,4vw,28px); border-bottom:1px solid var(--ring);
    background:color-mix(in oklab, var(--card) 60%, transparent)}
  .brand{font-weight:700}
  .kbd{font:12px/1.2 ui-monospace,Menlo,Consolas,monospace; color:var(--muted)}

  /* Carrousel horizontal fluide */
  .deck{
    position:relative; flex:1; overflow-x:auto; overflow-y:hidden;
    scroll-snap-type:x mandatory; scroll-behavior:smooth;
    -webkit-overflow-scrolling:touch;  /* iOS */
    background:radial-gradient(1000px 600px at 50% 8%, color-mix(in oklab, var(--card) 60%, transparent), transparent);
    scrollbar-width:none;           /* Firefox */
    -ms-overflow-style:none;        /* IE/Edge legacy */
  }
  .deck::-webkit-scrollbar{display:none} /* WebKit */

  .rail{display:flex; height:100%}

  /* 4 encarts = 4 slides plein écran */
  .slide{
    scroll-snap-align:center; scroll-snap-stop:always;
    flex:0 0 100%;
    padding: clamp(14px, 4vw, 32px);
    display:grid; place-items:center;
  }

  .card{
    width:min(960px, 92vw);
    min-height:min(76vh, 680px);
    display:grid; grid-template-rows:auto 1fr auto; gap:18px;
    background:var(--card); border:1px solid var(--ring); border-radius:var(--radius); box-shadow:var(--shadow);
    padding: clamp(16px, 4vw, 32px);
    transform: translateZ(0);   /* GPU hint */
    transition: box-shadow .25s ease, transform .25s ease;
  }
  .card h1{margin:0; font-size:clamp(22px, 5vw, 40px); letter-spacing:-.02em}
  .card p{margin:0; color:var(--muted); font-size:clamp(14px, 2.6vw, 18px)}

  .grid{display:grid; gap:12px; grid-template-columns:repeat(12,1fr)}
  .tile{
    grid-column:span 6; min-height:110px;
    background:linear-gradient(180deg, color-mix(in oklab, var(--card) 85%, transparent), transparent);
    border:1px solid var(--ring); border-radius:14px; padding:14px;
  }
  .tile small{color:var(--muted)}
  .tile h3{margin:6px 0 4px; font-size:clamp(16px, 2.4vw, 20px)}
  .tile p{margin:0; color:var(--muted); font-size:clamp(13px, 2.2vw, 16px)}

  /* Mobile : 1 colonne lisible, contrôles “thumb-friendly” */
  @media (max-width: 860px){
    .card{min-height:72vh}
    .grid{grid-template-columns:1fr}
    .tile{grid-column:1/-1}
  }

  .actions{display:flex; flex-wrap:wrap; gap:10px}
  .btn{
    appearance:none; cursor:pointer; padding:10px 14px; border-radius:12px; border:1px solid var(--ring);
    background:transparent; color:var(--ink); transition:transform .12s ease;
  }
  .btn:active{transform:translateY(1px)}
  .btn.primary{background:var(--ink); color:var(--card); border-color:transparent}

  /* Contrôles fixes + pastilles */
  .controls{
    position:absolute; left:0; right:0; bottom:12px; display:flex; justify-content:center; pointer-events:none;
    padding:0 clamp(12px, 4vw, 28px);
  }
  .pill{pointer-events:auto; display:flex; gap:10px; align-items:center; background:color-mix(in oklab, var(--card) 70%, transparent);
    border:1px solid var(--ring); padding:8px 10px; border-radius:999px; box-shadow:var(--shadow)}
  .navbtn{width:40px; height:40px; border-radius:999px; border:1px solid var(--ring); background:var(--card); display:grid; place-items:center; cursor:pointer}
  .dots{display:flex; gap:6px; padding:0 6px}
  .dot{width:8px; height:8px; border-radius:50%; background:var(--ring); cursor:pointer}
  .dot.active{background:var(--acc); box-shadow:0 0 0 6px color-mix(in oklab, var(--acc) 25%, transparent)}

  /* Barre de progression */
  .progress{position:absolute; left:0; right:0; top:0; height:3px; background:var(--ring)}
  .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--acc), color-mix(in oklab, var(--acc) 30%, transparent))}

  /* Micro-effet fluide pendant le scroll */
  .slide.is-near .card{ box-shadow:0 16px 48px rgba(0,0,0,.10); transform: translateY(-2px) }
</style>
</head>
<body>
<div class="app" aria-live="polite">
  <div class="topbar">
    <div class="brand">Vitrine</div>
    <div class="kbd">Astuce : molette (verticale) → navigation horizontale • swipe mobile</div>
  </div>

  <div class="deck" id="deck" aria-roledescription="carrousel">
    <div class="progress"><div class="bar" id="bar"></div></div>
    <div class="rail" id="rail">
      <!-- 4 ENCARTS UNIQUEMENT -->
      <section class="slide" aria-label="01 Accueil">
        <div class="card">
          <header><h1>Accueil — cap sur l’essentiel</h1><p>4 encarts pour test. Navigation douce & responsive.</p></header>
          <main class="grid">
            <div class="tile"><small>Manifeste</small><h3>Clarté, espace, lisibilité</h3><p>Sans gimmick, sans surcharge.</p></div>
            <div class="tile"><small>Interaction</small><h3>Molette ↔ / Swipe</h3><p>Simple et fiable, partout.</p></div>
            <div class="tile"><small>Design</small><h3>Grille bento</h3><p>Cartes stables, focus central.</p></div>
            <div class="tile"><small>Perf</small><h3>Vanilla, GPU 2D</h3><p>Transferts légers.</p></div>
          </main>
          <footer class="actions"><button class="btn primary">Découvrir</button><button class="btn">Contact</button></footer>
        </div>
      </section>

      <section class="slide" aria-label="02 À propos">
        <div class="card">
          <header><h1>À propos — approche</h1><p>Moins mais mieux : utile, durable, élégant.</p></header>
          <main class="grid">
            <div class="tile"><small>Sobriété</small><h3>Aller à l’essentiel</h3><p>Respiration visuelle.</p></div>
            <div class="tile"><small>Qualité</small><h3>Micro-interactions</h3><p>Sans artifice gratuit.</p></div>
            <div class="tile"><small>Durabilité</small><h3>Code frugal</h3><p>Maintenable.</p></div>
            <div class="tile"><small>Accessibilité</small><h3>Clavier / ARIA</h3><p>Tailles fluides.</p></div>
          </main>
          <footer class="actions"><button class="btn primary">Notre méthode</button></footer>
        </div>
      </section>

      <section class="slide" aria-label="03 Technologie">
        <div class="card">
          <header><h1>Technologie — front léger</h1><p>HTML sémantique, CSS variables, JS minimal.</p></header>
          <main class="grid">
            <div class="tile"><small>Composabilité</small><h3>Modules clairs</h3><p>Testables.</p></div>
            <div class="tile"><small>Intégrations</small><h3>APIs sobres</h3><p>Analytics éthiques.</p></div>
            <div class="tile"><small>Performance</small><h3>60fps visés</h3><p>Lazy data.</p></div>
            <div class="tile"><small>Handoff</small><h3>Guidelines</h3><p>Tokens & assets.</p></div>
          </main>
          <footer class="actions"><button class="btn primary">Voir un proto</button><button class="btn">Specs</button></footer>
        </div>
      </section>

      <section class="slide" aria-label="04 Contact">
        <div class="card">
          <header><h1>Contact — parlons</h1><p>Une idée, une refonte ? On écoute.</p></header>
          <main class="grid">
            <div class="tile"><small>Email</small><h3>hello@vitrine.example</h3><p>Réponse rapide.</p></div>
            <div class="tile"><small>RDV</small><h3>30 minutes</h3><p>Cadrage besoin.</p></div>
            <div class="tile"><small>Livrables</small><h3>Prototype + guide</h3><p>Handoff clair.</p></div>
            <div class="tile"><small>Engagement</small><h3>Clarté & exigence</h3><p>Sans blabla.</p></div>
          </main>
          <footer class="actions"><button class="btn primary">Écrire</button><button class="btn">Prendre RDV</button></footer>
        </div>
      </section>
    </div>

    <!-- Contrôles -->
    <div class="controls">
      <div class="pill">
        <button class="navbtn" id="prev" aria-label="Précédent">◄</button>
        <div class="dots" id="dots"></div>
        <button class="navbtn" id="next" aria-label="Suivant">►</button>
      </div>
    </div>
  </div>
</div>

<script>
const deck = document.getElementById('deck');
const rail = document.getElementById('rail');
const dots = document.getElementById('dots');
const bar  = document.getElementById('bar');
const slides = [...rail.children];
let idx = 0;

/* Pastilles */
function renderDots(){
  dots.innerHTML = "";
  slides.forEach((_,i)=>{
    const b = document.createElement('button');
    b.className = 'dot' + (i===idx?' active':'');
    b.addEventListener('click', ()=> go(i));
    dots.appendChild(b);
  });
}

/* Aller à une slide (smooth + snap) */
function go(i){
  idx = (i + slides.length) % slides.length;
  const x = idx * deck.clientWidth;
  deck.scrollTo({ left: x, behavior: 'smooth' });
  updateUI();
}

/* Wheel vertical => scroll horizontal fluide (+ debounce) */
let wheelLock = false;
deck.addEventListener('wheel', (e)=>{
  // on accepte aussi la molette verticale (deltaY)
  const delta = Math.abs(e.deltaY) >= Math.abs(e.deltaX) ? e.deltaY : e.deltaX;
  if(Math.abs(delta) < 8) return;
  e.preventDefault();   // pour éviter les “sursauts” sur certaines configs
  if(wheelLock) return;
  wheelLock = true;
  delta > 0 ? go(idx+1) : go(idx-1);
  setTimeout(()=> wheelLock=false, 280);
},{passive:false});

/* Clavier */
window.addEventListener('keydown', e=>{
  if(e.key==='ArrowRight') go(idx+1);
  else if(e.key==='ArrowLeft') go(idx-1);
});

/* Boutons */
document.getElementById('prev').addEventListener('click', ()=> go(idx-1));
document.getElementById('next').addEventListener('click', ()=> go(idx+1));

/* Mise à jour barre & pastilles selon la position de scroll */
function updateUI(){
  [...dots.children].forEach((d,k)=> d.classList.toggle('active', k===idx));
  bar.style.width = ((idx+1)/slides.length*100) + '%';
}

/* Effet fluide pendant le scroll (mise en avant de la carte proche) */
function onScroll(){
  const w = deck.clientWidth;
  const left = deck.scrollLeft;
  const center = left + w/2;
  slides.forEach((s, i)=>{
    const rect = s.getBoundingClientRect();
    const slideCenter = rect.left + rect.width/2;
    const dist = Math.abs(slideCenter - window.innerWidth/2);
    s.classList.toggle('is-near', dist < w*0.35);
  });
  // index approximatif en direct
  idx = Math.round(left / w);
  updateUI();
}
deck.addEventListener('scroll', onScroll, {passive:true});

/* Resize = recalcule l’ancrage */
window.addEventListener('resize', ()=> go(idx));

/* Init */
renderDots();
go(0);
</script>
</body>
</html>
