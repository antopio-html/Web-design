<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vitrine Web — Navigation Orbitale</title>
<style>
  :root{
    --bg: #f7f8fa;
    --ink: #0f1115;
    --muted:#6b7280;
    --acc: #0ea5a5;      /* accent discret */
    --acc-2:#7c3aed;     /* accent secondaire pour états */
    --ring:#e5e7eb;
    --card:#ffffff;
    --shadow: 0 10px 30px rgba(0,0,0,.08);
    --r: 44vmin;         /* rayon de l’orbite */
    --t: 560ms;          /* durée des transitions */
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0b0d11; --ink:#eef2f7; --muted:#94a3b8; --ring:#1f2937; --card:#0f141b; 
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font:16px/1.45 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Noto Sans", sans-serif;}
  .app{position:fixed;inset:0;display:grid;place-items:center;overflow:hidden}
  
  /* Anneau orbital */
  .ring{
    position:relative;width:calc(var(--r)*2 + 40vmin);height:calc(var(--r)*2 + 40vmin);
    border-radius:50%;
    display:grid;place-items:center;
    transition:filter var(--t) ease;
  }
  .ring::before{
    content:""; position:absolute; inset:10vmin; border-radius:50%;
    border:1px dashed var(--ring);
    filter:blur(.2px);
  }

  /* Pastilles de navigation (points cardinaux + stations intermédiaires) */
  .nav-dots{position:absolute; inset:0; pointer-events:none}
  .dot{
    position:absolute;width:10px;height:10px;border-radius:50%; background:var(--ring); 
    box-shadow: 0 0 0 6px color-mix(in oklab, var(--ring) 40%, transparent);
    transform:translate(-50%,-50%); pointer-events:auto; cursor:pointer; transition:all 200ms ease;
  }
  .dot.active{ background:var(--acc); box-shadow:0 0 0 8px color-mix(in oklab, var(--acc) 20%, transparent); }

  /* Carte centrale (station active) */
  .stage{
    position:relative; width:min(860px, 90vw); height:min(520px, 70vh); 
    border-radius:22px; background:var(--card); box-shadow:var(--shadow);
    padding: clamp(18px, 4vw, 36px);
    display:grid; grid-template-rows:auto 1fr auto; gap:18px;
    backdrop-filter:saturate(140%) blur(6px);
    transition: transform var(--t) ease, filter var(--t) ease, background var(--t) ease;
  }
  .stage h1{margin:0; font-size: clamp(22px, 4.2vw, 38px); letter-spacing:-.02em}
  .stage p{margin:0; color:var(--muted); font-size:clamp(14px, 2.2vw, 18px)}
  .actions{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
  .btn{
    appearance:none; border:1px solid var(--ring); background:transparent; color:var(--ink);
    padding:10px 14px; border-radius:12px; cursor:pointer; transition:all 160ms ease;
  }
  .btn:focus-visible{outline:2px solid var(--acc)}
  .btn.primary{ background:var(--ink); color:var(--card); border-color:transparent}
  .btn:hover{ transform:translateY(-1px)}
  .meta{display:flex; align-items:center; gap:10px; color:var(--muted); font-size:13px}

  /* Tuiles “bento” à l’intérieur de la station */
  .grid{display:grid; grid-template-columns:repeat(12, 1fr); gap:12px}
  .tile{
    grid-column: span 6; background:linear-gradient(180deg, color-mix(in oklab, var(--card) 90%, transparent), color-mix(in oklab, var(--card) 70%, transparent));
    border:1px solid var(--ring); border-radius:16px; padding:16px; min-height:120px; position:relative; overflow:hidden;
  }
  .tile small{color:var(--muted)}
  .badge{
    position:absolute; right:10px; top:10px; font-size:11px; padding:6px 10px; border-radius:999px; 
    color:var(--card); background:var(--acc-2);
  }
  .tile h3{margin:8px 0 6px 0; font-size: clamp(16px, 2vw, 20px)}
  .tile p{margin:0; font-size: clamp(13px, 1.6vw, 16px); color:var(--muted)}
  .tile .line{position:absolute; inset:auto 0 0 0; height:2px; background:linear-gradient(90deg, var(--acc), transparent)}

  /* Responsif */
  @media (max-width: 860px){
    .stage{height:auto; min-height:72vh}
    .grid{grid-template-columns:1fr}
    .tile{grid-column:1/-1}
  }

  /* Barre inférieure de statut / navigation */
  .footer{
    display:flex; align-items:center; justify-content:space-between; gap:12px; padding-top:8px; border-top:1px solid var(--ring);
  }
  .progress{position:relative; flex:1; height:6px; background:var(--ring); border-radius:999px; overflow:hidden}
  .bar{position:absolute; inset:0; width:0%; background:linear-gradient(90deg, var(--acc), color-mix(in oklab, var(--acc) 30%, transparent));}

  /* Panneau palette (barre d’espace) */
  .palette{
    position:fixed; left:50%; bottom:24px; transform:translateX(-50%) translateY(120%);
    background:var(--card); border:1px solid var(--ring); border-radius:14px; box-shadow:var(--shadow);
    width:min(860px, 92vw); padding:10px; display:flex; gap:8px; transition:transform 240ms ease;
  }
  .palette.show{ transform:translateX(-50%) translateY(0)}
  .chip{padding:8px 12px; border-radius:999px; border:1px solid var(--ring); cursor:pointer; user-select:none}
  .chip.active{ background:var(--ink); color:var(--card); border-color:transparent}

  /* Curseur magnétique (desktop) */
  @media (pointer:fine){
    .magnet{ position:fixed; width:18px; height:18px; border:2px solid color-mix(in oklab, var(--ink) 40%, transparent); border-radius:50%; left:-100px; top:-100px; pointer-events:none; mix-blend-mode:multiply; transition: transform 70ms linear;}
  }
</style>
</head>
<body>
<div class="app" id="app" aria-live="polite">
  <div class="ring" id="ring" aria-hidden="true">
    <!-- pastilles positionnées en JS -->
    <div class="nav-dots" id="dots"></div>
    <section class="stage" id="stage" role="group" aria-roledescription="station orbitale">
      <header>
        <h1 id="title">Accueil — L’expérience orbitale</h1>
        <p id="subtitle">Une vitrine web minimaliste, non-linéaire, centrée, où chaque section “tourne” en avant-scène.</p>
      </header>

      <main class="grid" id="grid">
        <!-- tuiles injectées en JS -->
      </main>

      <div class="footer">
        <div class="meta" id="meta">Utilise la molette, ←/→, swipe, ou clique une pastille.</div>
        <button class="btn" id="prev" aria-label="Précédent">◄</button>
        <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
        <button class="btn" id="next" aria-label="Suivant">►</button>
      </div>
    </section>
  </div>
</div>

<!-- Palette -->
<div class="palette" id="palette" aria-label="Palette de navigation">
  <!-- chips injectées -->
</div>

<div class="magnet" id="magnet" aria-hidden="true"></div>

<script>
/* ---------- Données des “stations” (sections de la vitrine) ---------- */
const STATIONS = [
  {
    id:"home",
    title:"Accueil — L’expérience orbitale",
    subtitle:"Une vitrine minimaliste, non-linéaire, où le contenu vient à toi.",
    tiles:[
      {k:"Manifeste", v:"Design clair, beaucoup d’espace, interactions douces. Zéro scroll vertical imposé.", badge:"minimal"},
      {k:"Interaction", v:"Molette, flèches, swipe, clic — choisis ton chemin.", badge:"input"},
      {k:"Différence", v:"Structure radiale : la scène active se présente au centre, net et focalisé.", badge:"radial"},
      {k:"Accessibilité", v:"ARIA, contrastes, responsive natif. Petite latence = grand confort.", badge:"a11y"},
    ],
    cta:[{label:"Découvrir", kind:"primary"}, {label:"Contact"}]
  },
  {
    id:"about",
    title:"À propos — Vision & principes",
    subtitle:"Nous créons des expériences utiles, sobres et vivantes.",
    tiles:[
      {k:"Sobriété", v:"Aller à l’essentiel. Supprimer le bruit. Valoriser la respiration visuelle.", badge:"design"},
      {k:"Qualité", v:"Typo lisible, layout stable, micro-interactions sans gimmick.", badge:"craft"},
      {k:"Durabilité", v:"Code léger, sans dépendance. Dark-mode natif. Respect du CPU.", badge:"eco"},
      {k:"Méthode", v:"Prototype → feedback → raffinement. Toujours proche de l’usage.", badge:"loop"},
    ],
    cta:[{label:"Notre méthode", kind:"primary"}]
  },
  {
    id:"tech",
    title:"Technologie — Front léger, back pragmatique",
    subtitle:"Vanilla JS, Web Components si besoin, APIs sobres, intégrations mesurées.",
    tiles:[
      {k:"Front", v:"HTML sémantique, CSS variables, JS composable. Pas de framework par défaut.", badge:"web"},
      {k:"Perf", v:"Lazy data, animations GPU 2D (pas de 3D ici), 60fps visés.", badge:"perf"},
      {k:"Accessibilité", v:"Navigation clavier, ARIA, tailles fluides. Testé mobile first.", badge:"a11y"},
      {k:"Intégrations", v:"Email, form, analytics éthiques. SSO si nécessaire.", badge:"api"},
    ],
    cta:[{label:"Voir un proto", kind:"primary"}, {label:"Specs"}]
  },
  {
    id:"work",
    title:"Travaux — Sélection épurée",
    subtitle:"Des pièces choisies pour illustrer notre approche.",
    tiles:[
      {k:"Produit A", v:"Interface de pilotage, vues d’ensemble, focus par étapes.", badge:"case"},
      {k:"Produit B", v:"Cartes minimalistes, geste unique, data claire.", badge:"case"},
      {k:"Expérience", v:"Transitions ‘vers soi’ sans scroll, flux contrôlé.", badge:"ux"},
      {k:"Impact", v:"Taux d’erreur -24%, NPS +18, adoption +31%.", badge:"résultats"},
    ],
    cta:[{label:"Études de cas", kind:"primary"}]
  },
  {
    id:"contact",
    title:"Contact — Parlons concret",
    subtitle:"Une idée, un produit à dépoussiérer, une vitrine à réinventer ?",
    tiles:[
      {k:"Email", v:"hello@vitrine.example", badge:"@"},
      {k:"Calendrier", v:"30 minutes pour cadrer vos besoins.", badge:"meet"},
      {k:"Livrables", v:"Prototype, guideline, handoff clair.", badge:"deliver"},
      {k:"Engagement", v:"Clarté, honnêteté, exigence.", badge:"ethos"},
    ],
    cta:[{label:"Écrire", kind:"primary"}, {label:"Prendre RDV"}]
  }
];

/* ---------- État & éléments ---------- */
const ring   = document.getElementById('ring');
const stage  = document.getElementById('stage');
const dotsEl = document.getElementById('dots');
const bar    = document.getElementById('bar');
const title  = document.getElementById('title');
const subtitle = document.getElementById('subtitle');
const grid   = document.getElementById('grid');
const meta   = document.getElementById('meta');
const palette= document.getElementById('palette');
const magnet = document.getElementById('magnet');
const prevBtn= document.getElementById('prev');
const nextBtn= document.getElementById('next');

let index = 0;
let lockWheel = false;

/* ---------- Helpers UI ---------- */
function lerp(a,b,t){ return a + (b-a)*t }
function clamp(v,min,max){ return Math.min(max, Math.max(min, v)) }

/* Positionne les pastilles autour de l’orbite */
function layoutDots(){
  dotsEl.innerHTML = "";
  STATIONS.forEach((s, i)=>{
    const t = (i / STATIONS.length) * Math.PI*2 - Math.PI/2; // démarre en haut
    const x = 50 + Math.cos(t) * 50;
    const y = 50 + Math.sin(t) * 50;
    const d = document.createElement('button');
    d.className = 'dot' + (i===index ? ' active':'');
    d.style.left = x + '%';
    d.style.top  = y + '%';
    d.title = s.title;
    d.setAttribute('aria-label', s.title);
    d.addEventListener('click', ()=> goto(i));
    dotsEl.appendChild(d);
  });
}

/* Remplit la “station” centrale */
function renderStation(i){
  const s = STATIONS[i];
  title.textContent = s.title;
  subtitle.textContent = s.subtitle;
  grid.innerHTML = "";
  s.tiles.forEach((t, k)=>{
    const el = document.createElement('div');
    el.className = 'tile';
    el.innerHTML = `
      <span class="badge">${t.badge}</span>
      <small>${t.k}</small>
      <h3>${t.v.split(' — ')[0]}</h3>
      <p>${t.v.split(' — ')[1] || ""}</p>
      <div class="line"></div>
    `;
    grid.appendChild(el);
  });
  const actions = document.createElement('div');
  actions.className = 'actions';
  (s.cta || []).forEach(c=>{
    const b = document.createElement('button');
    b.className = 'btn' + (c.kind==='primary' ? ' primary':'');
    b.textContent = c.label;
    actions.appendChild(b);
  });
  grid.appendChild(actions);

  /* petite animation d’entrée */
  stage.animate([
    { transform: 'scale(.985) translateY(6px)', filter:'blur(4px)' },
    { transform: 'scale(1) translateY(0)', filter:'blur(0px)' }
  ], { duration: 420, easing: 'cubic-bezier(.2,.8,.2,1)'});

  /* barre de progression */
  const p = ((i+1)/STATIONS.length)*100;
  bar.style.width = p + '%';

  /* pastilles actives */
  [...dotsEl.children].forEach((d, k)=> d.classList.toggle('active', k===i));

  /* meta */
  meta.textContent = `${i+1} / ${STATIONS.length} — ${s.id}`;
}

/* Rotation douce de l’anneau (effet orbitale) */
let currentRot = 0;
function rotateRing(toIdx){
  const step = (Math.PI*2)/STATIONS.length;
  const targetRot = -step * toIdx;
  const start = currentRot;
  const t0 = performance.now(), D = 540; // ms
  (function anim(now){
    const dt = now - t0;
    const k = clamp(dt / D, 0, 1);
    const e = (k<.5) ? 4*k*k*k : 1 - Math.pow(-2*k+2, 3)/2; // easeInOutCubic
    const r = lerp(start, targetRot, e);
    ring.style.transform = `rotate(${r}rad)`;
    if(k<1){ requestAnimationFrame(anim) } else { currentRot = targetRot }
  })(performance.now());
}

/* Aller à l’index demandé */
function goto(i){
  index = (i + STATIONS.length) % STATIONS.length;
  rotateRing(index);
  renderStation(index);
}

/* Wheel / swipe / keyboard */
function onWheel(e){
  if(lockWheel) return;
  lockWheel = true;
  (e.deltaY > 0 || e.deltaX > 0) ? goto(index+1) : goto(index-1);
  setTimeout(()=> lockWheel = false, 420);
}
let touchX=0, touchY=0;
function onTouchStart(e){ const t = e.touches[0]; touchX=t.clientX; touchY=t.clientY }
function onTouchMove(e){
  if(!touchX) return;
  const t = e.touches[0];
  const dx = t.clientX - touchX;
  const dy = t.clientY - touchY;
  if(Math.abs(dx) > 40 && Math.abs(dx) > Math.abs(dy)){
    if(dx < 0) goto(index+1); else goto(index-1);
    touchX=0; touchY=0;
  }
}
function onKey(e){
  if(e.key==='ArrowRight') goto(index+1);
  else if(e.key==='ArrowLeft') goto(index-1);
  else if(e.key===' ') { e.preventDefault(); palette.classList.toggle('show') }
}

/* Palette (chips = sauts directs) */
function buildPalette(){
  palette.innerHTML = "";
  STATIONS.forEach((s,i)=>{
    const chip = document.createElement('div');
    chip.className = 'chip' + (i===index?' active':'');
    chip.textContent = s.id;
    chip.addEventListener('click', ()=> { goto(i); palette.classList.remove('show') });
    palette.appendChild(chip);
  });
}
function updatePaletteActive(){
  [...palette.children].forEach((c,k)=> c.classList.toggle('active', k===index));
}

/* Curseur magnétique (desktop) */
document.addEventListener('mousemove', e=>{
  const {clientX:x, clientY:y} = e;
  magnet.style.transform = `translate(${x-9}px, ${y-9}px)`;
});

/* Boutons prev/next */
prevBtn.addEventListener('click', ()=> goto(index-1));
nextBtn.addEventListener('click', ()=> goto(index+1));

/* Listeners globaux */
window.addEventListener('wheel', onWheel, {passive:true});
window.addEventListener('touchstart', onTouchStart, {passive:true});
window.addEventListener('touchmove', onTouchMove, {passive:true});
window.addEventListener('keydown', onKey);

/* Init */
layoutDots();
buildPalette();
renderStation(index);

/* Observe index pour palette */
const obs = new MutationObserver(updatePaletteActive);
obs.observe(dotsEl, {childList:true, subtree:true});

/* Accessibilité : annoncer changement de station */
let liveTimer = null;
const app = document.getElementById('app');
function announce(txt){
  clearTimeout(liveTimer);
  const el = document.createElement('div');
  el.className = 'sr'; el.setAttribute('aria-live','assertive');
  el.style.position='absolute'; el.style.left='-9999px'; el.textContent = txt;
  app.appendChild(el);
  liveTimer = setTimeout(()=> el.remove(), 1500);
}
const _renderStation = renderStation;
renderStation = function(i){ _renderStation(i); announce(STATIONS[i].title); updatePaletteActive(); }
</script>
</body>
</html>
