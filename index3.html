<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Portfolio Démo — Rouge & Noir</title>
<meta name="description" content="Portfolio démo rouge & noir : animations, transitions, 3D tilt, scroll effects, particles, Web Animations API.">
<style>
  :root{
    --bg:#0b0b0d;
    --panel:#111115;
    --ink:#e6e6e9;
    --muted:#a6a6b0;
    --primary:#ff1f43;
    --primary-2:#ff4d6a;
    --line:#1e1e24;
    --radius:14px;
    --shadow:0 10px 25px rgba(0,0,0,.45), 0 2px 10px rgba(0,0,0,.3);
    --speed: .45s cubic-bezier(.2,.8,.2,1);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:radial-gradient(1200px 800px at 80% -10%, rgba(255,31,67,.12), transparent),
                         radial-gradient(1000px 600px at 10% 20%, rgba(255,31,67,.07), transparent),
                         var(--bg);
    color:var(--ink); font:15px/1.55 system-ui,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif;
    overflow-x:hidden;
  }
  a{color:inherit; text-decoration:none}
  img{max-width:100%; display:block}

  /* Canvas background */
  #fx{
    position:fixed; inset:0; z-index:-2; pointer-events:none; filter:saturate(1.2) contrast(1.05);
  }
  /* Subtle noise overlay */
  #grain{
    position:fixed; inset:-50px; z-index:-1; pointer-events:none; opacity:.07; mix-blend-mode:soft-light;
    background:
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".9" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');
    animation:grain 6s steps(2) infinite;
  }
  @keyframes grain{ 0%{transform:translate(0,0)} 100%{transform:translate(50px,0)} }

  header{
    position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.2) blur(8px);
    background:linear-gradient(to bottom, rgba(11,11,13,.85), rgba(11,11,13,.25) 60%, transparent);
    border-bottom:1px solid rgba(255,255,255,.04);
  }
  .nav{
    max-width:1200px; margin:auto; padding:14px clamp(14px,3vw,26px);
    display:flex; align-items:center; gap:14px; justify-content:space-between;
  }
  .brand{
    display:flex; align-items:center; gap:12px; font-weight:700; letter-spacing:.5px;
  }
  .logo{
    width:34px; aspect-ratio:1; border-radius:12px;
    background:
      radial-gradient(120% 120% at 80% 20%, rgba(255,255,255,.15), transparent 40%),
      linear-gradient(135deg, var(--primary), #b3122b 60%);
    box-shadow:0 10px 18px rgba(255,31,67,.25), inset 0 0 30px rgba(255,255,255,.08);
    position:relative; overflow:hidden;
  }
  .logo::after{
    content:""; position:absolute; inset:-1px; border-radius:12px;
    background:conic-gradient(from 180deg, rgba(255,255,255,.14), rgba(255,255,255,0) 40% 90%, rgba(255,255,255,.12));
    mix-blend-mode:overlay; animation:spin 7s linear infinite;
  }
  @keyframes spin{to{transform:rotate(1turn)}}

  .nav a{
    padding:10px 14px; border-radius:10px; color:var(--muted);
    transition:color var(--speed), background var(--speed), transform .25s;
  }
  .nav a:hover{color:var(--ink); background:#15151b}
  .cta{
    position:relative; padding:11px 16px; border-radius:999px; font-weight:700; letter-spacing:.4px;
    background:linear-gradient(180deg, var(--primary), #b3122b);
    color:white; box-shadow:0 10px 26px rgba(255,31,67,.35);
    transform-style:preserve-3d;
  }
  .cta::after{
    content:""; position:absolute; inset:0; border-radius:inherit; border:1px solid rgba(255,255,255,.18);
    box-shadow:inset 0 0 0 1px rgba(0,0,0,.25);
  }
  .cta:hover{transform:translateY(-1px)}
  .cta.magnet{--mx:0; --my:0; transform:translate(var(--mx),var(--my)) perspective(600px) rotateX(calc(var(--my)*-0.2)) rotateY(calc(var(--mx)*0.3));}

  main{isolation:isolate}
  .container{max-width:1200px; margin:auto; padding:0 clamp(16px,3vw,24px)}

  /* HERO */
  .hero{
    display:grid; grid-template-columns: 1.1fr .9fr; gap:30px; align-items:center;
    padding:90px 0 70px;
  }
  @media (max-width:960px){ .hero{grid-template-columns:1fr; padding:64px 0 40px} }
  .tag{display:inline-flex; gap:8px; align-items:center; padding:6px 10px; color:#ffccd5; background:#221116; border:1px solid #2a161b; border-radius:999px; font-size:12px; letter-spacing:.4px}
  .glitch{
    font-size:clamp(32px, 6vw, 64px); font-weight:900; line-height:1.05; margin:14px 0;
    position:relative; display:inline-block;
    text-shadow: -2px 0 rgba(255,31,67,.45), 2px 0 rgba(255,255,255,.06);
  }
  .glitch::before,.glitch::after{
    content:attr(data-text); position:absolute; inset:0; pointer-events:none; mix-blend-mode:screen;
  }
  .glitch::before{transform:translate3d(-2px,0,0); color:#ff4d6a; clip-path:inset(0 0 55% 0); animation:gl1 3s infinite}
  .glitch::after{transform:translate3d(2px,0,0); color:#fefefe; clip-path:inset(45% 0 0 0); animation:gl2 3.4s infinite}
  @keyframes gl1{ 0%,100%{clip-path:inset(0 0 40% 0)} 50%{clip-path:inset(0 0 70% 0)} }
  @keyframes gl2{ 0%,100%{clip-path:inset(60% 0 0 0)} 50%{clip-path:inset(30% 0 0 0)} }

  .lead{font-size:clamp(16px,2.2vw,20px); color:var(--muted); max-width:62ch}
  .hero-actions{display:flex; gap:12px; align-items:center; margin-top:18px; flex-wrap:wrap}

  .blob{
    aspect-ratio:1; width:min(520px, 78vw); margin-inline:auto; border-radius:50%;
    background:
      radial-gradient(60% 60% at 35% 30%, rgba(255,255,255,.22), transparent 60%),
      radial-gradient(90% 100% at 80% 80%, rgba(255,31,67,.35), transparent 50%),
      linear-gradient(135deg, #1b0f12, #24050a 40%, #3a0b15);
    box-shadow:
      inset 0 0 60px rgba(255,255,255,.06),
      0 30px 120px rgba(255,31,67,.25);
    position:relative; overflow:hidden; transform:translateZ(0);
    animation:float 7s ease-in-out infinite;
  }
  @keyframes float{50%{transform:translateY(-8px)}}
  .blob::before,.blob::after{
    content:""; position:absolute; inset:-20%; border-radius:50%;
    background:conic-gradient(from 90deg, transparent, rgba(255,31,67,.18), transparent 50%, rgba(255,31,67,.22));
    animation:morph 12s ease-in-out infinite;
    mix-blend-mode:screen;
  }
  .blob::after{animation-duration:15s; animation-direction:reverse; filter:blur(10px)}
  @keyframes morph{
    0%{transform:skew(0) rotate(0)}
    50%{transform:skew(2deg) rotate(180deg)}
    100%{transform:skew(0) rotate(360deg)}
  }

  /* SECTION WRAPPER */
  section{padding:70px 0; position:relative}
  section .title{
    font-size:clamp(18px,2.2vw,22px); letter-spacing:.6px; text-transform:uppercase; color:#ff97a8;
    display:flex; align-items:center; gap:12px; margin-bottom:18px;
  }
  .title::before{
    content:""; width:36px; height:2px; background:linear-gradient(90deg, var(--primary), transparent);
    border-radius:2px; opacity:.7;
  }
  .grid{
    display:grid; gap:16px; grid-template-columns:repeat(12,1fr);
  }

  /* PROJECTS */
  .card{
    grid-column:span 4; min-height:220px; background:linear-gradient(180deg,#141418,#0f0f14);
    border:1px solid #1a1a22; border-radius:var(--radius); padding:18px; position:relative; overflow:hidden;
    box-shadow:var(--shadow); transform-style:preserve-3d; transition:transform .2s ease, border-color var(--speed);
  }
  @media (max-width:1100px){ .card{grid-column:span 6} }
  @media (max-width:720px){ .card{grid-column:span 12} }
  .card:hover{border-color:#272733}
  .card .meta{display:flex; align-items:center; justify-content:space-between; color:var(--muted); font-size:12px}
  .card h3{margin:.2rem 0 .4rem; font-size:18px}
  .chip{padding:4px 8px; border-radius:999px; background:#1a0d11; color:#ffb2bf; border:1px solid #2a1419; font-size:12px}
  .thumb{
    --glow: rgba(255,31,67,.28);
    margin-top:10px; border-radius:12px; height:140px; background:
      radial-gradient(120% 80% at 80% 0%, var(--glow), transparent 40%),
      linear-gradient(180deg, #1a1a22, #141419);
    border:1px solid #1f1f28; position:relative; overflow:hidden;
  }
  .thumb::after{
    content:""; position:absolute; inset:-30% -10% auto -10%; height:200%;
    background:repeating-linear-gradient( 120deg, rgba(255,255,255,.06) 0 2px, transparent 2px 6px);
    transform:skewY(-10deg) translateY(-20%); opacity:.35; filter:blur(.4px);
    animation:scan 4s linear infinite;
  }
  @keyframes scan{to{transform:skewY(-10deg) translateY(-60%)}}

  /* SKILLS RINGS */
  .skills{grid-template-columns:repeat(4,1fr)}
  @media (max-width:900px){ .skills{grid-template-columns:repeat(2,1fr)} }
  @media (max-width:540px){ .skills{grid-template-columns:1fr} }
  .ring{
    background:linear-gradient(180deg,#141418,#0f0f14); border:1px solid #1a1a22; border-radius:var(--radius);
    padding:18px; display:flex; align-items:center; gap:18px; box-shadow:var(--shadow);
  }
  .ring svg{width:86px; height:86px; rotate:-90deg}
  .ring .cap{font-weight:800; letter-spacing:.4px}
  .ring .desc{color:var(--muted); font-size:13px}

  /* TIMELINE */
  .timeline{
    position:relative; padding-left:22px; border-left:2px dashed #2a2a33; margin-top:10px;
  }
  .timeline .item{
    position:relative; padding:14px 14px 14px 10px; margin:8px 0; background:#111116; border:1px solid #1b1b24; border-radius:12px;
    transition:transform var(--speed), background var(--speed), border-color var(--speed);
  }
  .timeline .item::before{
    content:""; position:absolute; left:-29px; top:18px; width:12px; height:12px; border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #fff, #fff0 30%), linear-gradient(180deg,var(--primary),#b3122b);
    box-shadow:0 0 0 4px #1b0f12, 0 0 0 8px #12080c;
  }
  .timeline .item:hover{transform:translateX(4px); border-color:#292936; background:#101016}

  /* CONTACT */
  form{
    display:grid; gap:12px; grid-template-columns: repeat(2,1fr);
    background:linear-gradient(180deg,#131317,#0e0e12); border:1px solid #1a1a22; border-radius:var(--radius);
    padding:18px; box-shadow:var(--shadow);
  }
  form .full{grid-column:1/-1}
  label{font-size:12px; color:#ff97a8}
  input,textarea{
    width:100%; padding:12px 12px; border-radius:10px; border:1px solid #22222c; background:#0d0d11; color:var(--ink);
    outline:none; transition:border var(--speed), background var(--speed), transform .12s;
  }
  input:focus,textarea:focus{border-color:#2b2b38; background:#0f0f14; transform:translateY(-1px)}
  textarea{min-height:120px; resize:vertical}

  /* FOOTER */
  footer{
    margin-top:70px; padding:32px 0; color:#9b9baa; border-top:1px solid #17171f; text-align:center;
    background:linear-gradient(180deg, transparent, #0a0a0c);
  }

  /* REVEAL ANIMATIONS */
  .reveal{opacity:0; transform:translateY(22px) scale(.98); filter:blur(6px); will-change:transform}
  .reveal.show{opacity:1; transform:none; filter:none; transition:opacity .7s var(--speed), transform .7s var(--speed), filter .7s var(--speed)}

  /* Cursor */
  .cursor{
    position:fixed; width:26px; height:26px; border-radius:50%;
    border:1px solid rgba(255,255,255,.4); pointer-events:none; z-index:99999; mix-blend-mode:difference;
    transform:translate(-50%,-50%); transition:width .2s,height .2s, border .2s, background .2s, transform .06s linear;
  }
  .cursor.active{width:42px; height:42px; border-color:rgba(255,31,67,.7); background:rgba(255,31,67,.2)}
  .cursor.hide{opacity:0}

  /* Utilities */
  .split{display:flex; align-items:center; gap:12px; flex-wrap:wrap}
  .muted{color:var(--muted)}
  .spacer{height:14px}
</style>
</head>
<body>
<canvas id="fx" aria-hidden="true"></canvas>
<div id="grain" aria-hidden="true"></div>
<div class="cursor" id="cursor"></div>

<header>
  <nav class="nav">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <span>Red&Black Demo</span>
    </div>
    <div class="split" role="navigation" aria-label="Sections">
      <a href="#projets">Projets</a>
      <a href="#skills">Compétences</a>
      <a href="#timeline">Parcours</a>
      <a href="#contact" class="cta magnet">Me contacter</a>
    </div>
  </nav>
</header>

<main class="container">
  <!-- HERO -->
  <section class="hero">
    <div class="left reveal">
      <span class="tag"><span>⚡</span> Démo moderne • Web Vanilla</span>
      <h1 class="glitch" data-text="Design. Motion. Impact.">Design. Motion. Impact.</h1>
      <p class="lead">
        Un portfolio démonstrateur <strong>rouge & noir</strong> conçu pour mettre en avant des
        <em>techniques front modernes</em> : Canvas Particles, IntersectionObserver, Web Animations API,
        3D tilt, parallax, micro-interactions, SVG rings… le tout sans aucune librairie externe.
      </p>
      <div class="hero-actions">
        <a class="cta magnet" href="#projets">Voir les projets</a>
        <a class="navbtn" href="#skills" style="border:1px solid #262631; padding:11px 14px; border-radius:999px; color:#c6c6d1;">Explorer les skills →</a>
      </div>
    </div>
    <div class="right reveal">
      <div class="blob" aria-hidden="true"></div>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projets">
    <h2 class="title">Projets en vitrine</h2>
    <div class="grid">
      <!-- 6 cartes démo -->
      <article class="card reveal tilt" tabindex="0" aria-label="Projet A — Canvas Particles">
        <div class="meta"><span class="chip">Canvas</span><span>2025</span></div>
        <h3>FX Particles</h3>
        <p class="muted">Système de particules custom (gravité, vitesse, liaisons) performant sur Canvas 2D.</p>
        <div class="thumb"></div>
      </article>

      <article class="card reveal tilt" tabindex="0" aria-label="Projet B — Web Animations API">
        <div class="meta"><span class="chip">WAAPI</span><span>2025</span></div>
        <h3>Micro-interactions</h3>
        <p class="muted">Animations déclaratives fluides, orchestrées au scroll et au survol.</p>
        <div class="thumb"></div>
      </article>

      <article class="card reveal tilt" tabindex="0" aria-label="Projet C — IntersectionObserver">
        <div class="meta"><span class="chip">IO</span><span>2025</span></div>
        <h3>Scroll-reveal</h3>
        <p class="muted">Révélations progressives, performantes et accessibles sur l’axe Y.</p>
        <div class="thumb"></div>
      </article>

      <article class="card reveal tilt" tabindex="0" aria-label="Projet D — SVG & CSS">
        <div class="meta"><span class="chip">SVG</span><span>2025</span></div>
        <h3>Rings dynamiques</h3>
        <p class="muted">Anneaux de progression animés sur mesure (stroke-dasharray / offset).</p>
        <div class="thumb"></div>
      </article>

      <article class="card reveal tilt" tabindex="0" aria-label="Projet E — Parallax & Tilt">
        <div class="meta"><span class="chip">3D</span><span>2025</span></div>
        <h3>Tilts & Parallax</h3>
        <p class="muted">Effets 3D subtils au pointeur, avec limites & reset pour l’accessibilité.</p>
        <div class="thumb"></div>
      </article>

      <article class="card reveal tilt" tabindex="0" aria-label="Projet F — Forms UX">
        <div class="meta"><span class="chip">UX</span><span>2025</span></div>
        <h3>Form patterns</h3>
        <p class="muted">Formulaire propre, focus states, validation immédiate côté client.</p>
        <div class="thumb"></div>
      </article>
    </div>
  </section>

  <!-- SKILLS RINGS -->
  <section id="skills">
    <h2 class="title">Compétences clés</h2>
    <div class="grid skills">
      <div class="ring reveal">
        <svg viewBox="0 0 100 100" aria-hidden="true">
          <circle cx="50" cy="50" r="42" stroke="#1e1e28" stroke-width="10" fill="none"/>
          <circle class="meter" data-val="92" cx="50" cy="50" r="42" stroke="url(#g1)" stroke-width="10" fill="none" stroke-linecap="round" />
          <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#ff1f43"/><stop offset="1" stop-color="#ff8599"/></linearGradient></defs>
        </svg>
        <div>
          <div class="cap">HTML5 / CSS3</div>
          <div class="desc">Responsive, grid/flex, animations complexes, accessibilité.</div>
        </div>
      </div>
      <div class="ring reveal">
        <svg viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="42" stroke="#1e1e28" stroke-width="10" fill="none"/>
          <circle class="meter" data-val="88" cx="50" cy="50" r="42" stroke="url(#g2)" stroke-width="10" fill="none" stroke-linecap="round" />
          <defs><linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="#ff1f43"/><stop offset="1" stop-color="#ff8599"/></linearGradient></defs>
        </svg>
        <div>
          <div class="cap">JavaScript (ES2023+)</div>
          <div class="desc">IntersectionObserver, Canvas, WAAPI, patterns modulaires.</div>
        </div>
      </div>
      <div class="ring reveal">
        <svg viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="42" stroke="#1e1e28" stroke-width="10" fill="none"/>
          <circle class="meter" data-val="80" cx="50" cy="50" r="42" stroke="url(#g3)" stroke-width="10" fill="none" stroke-linecap="round" />
          <defs><linearGradient id="g3" x1="0" x2="1"><stop offset="0" stop-color="#ff1f43"/><stop offset="1" stop-color="#ff8599"/></linearGradient></defs>
        </svg>
        <div>
          <div class="cap">Perf & UX</div>
          <div class="desc">60 FPS, lazy/intersection, hit-targets, contrasts, key nav.</div>
        </div>
      </div>
      <div class="ring reveal">
        <svg viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="42" stroke="#1e1e28" stroke-width="10" fill="none"/>
          <circle class="meter" data-val="84" cx="50" cy="50" r="42" stroke="url(#g4)" stroke-width="10" fill="none" stroke-linecap="round" />
          <defs><linearGradient id="g4" x1="0" x2="1"><stop offset="0" stop-color="#ff1f43"/><stop offset="1" stop-color="#ff8599"/></linearGradient></defs>
        </svg>
        <div>
          <div class="cap">Motion Design</div>
          <div class="desc">Micro-interactions, parallax, tilt, timelines réglées au détail.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- TIMELINE -->
  <section id="timeline">
    <h2 class="title">Parcours sélectif</h2>
    <div class="timeline">
      <div class="item reveal">
        <strong>2025</strong> — Création d’un moteur d’effets canvas réutilisable (particles • lines • attractors).
      </div>
      <div class="item reveal">
        <strong>2024</strong> — Bibliothèque interne de micro-interactions WAAPI (sans dépendances).
      </div>
      <div class="item reveal">
        <strong>2023</strong> — Design system sombre haute lisibilité (rouge & noir), tokens & thèmes.
      </div>
      <div class="item reveal">
        <strong>2022</strong> — Outillage accessibilité (focus ring, skip links, tab cycles).
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact">
    <h2 class="title">Contact</h2>
    <form novalidate>
      <div>
        <label for="nom">Nom</label>
        <input id="nom" name="nom" required placeholder="Votre nom" autocomplete="name" />
      </div>
      <div>
        <label for="mail">Email</label>
        <input id="mail" name="mail" type="email" required placeholder="vous@domaine.com" autocomplete="email" />
      </div>
      <div class="full">
        <label for="msg">Message</label>
        <textarea id="msg" name="msg" required placeholder="Votre message…"></textarea>
      </div>
      <div class="full split">
        <button type="submit" class="cta magnet">Envoyer</button>
        <span class="muted">Aucune donnée n’est transmise — démo locale.</span>
      </div>
    </form>
  </section>
</main>

<footer>
  <div class="container">
    © 2025 • Démo rouge & noir — construit sans librairie externe. Appuyez sur <kbd>G</kbd> pour un boost d’effets ✨
  </div>
</footer>

<script>
/* ========= Helpers ========= */
const lerp = (a,b,t)=>a+(b-a)*t;

/* ========= Fancy cursor ========= */
(function(){
  const c = document.getElementById('cursor');
  let x=0,y=0, tx=0, ty=0, raf;
  const loop=()=>{ tx=lerp(tx,x,0.18); ty=lerp(ty,y,0.18); c.style.transform=`translate(${tx-13}px,${ty-13}px)`; raf=requestAnimationFrame(loop) };
  window.addEventListener('pointermove',e=>{x=e.clientX; y=e.clientY; c.classList.remove('hide')});
  window.addEventListener('pointerdown',()=>c.classList.add('active'));
  window.addEventListener('pointerup',()=>c.classList.remove('active'));
  window.addEventListener('mouseleave',()=>c.classList.add('hide'));
  loop();
})();

/* ========= Magnet buttons ========= */
document.querySelectorAll('.magnet').forEach(btn=>{
  const bounds = ()=>btn.getBoundingClientRect();
  btn.addEventListener('pointermove', e=>{
    const b=bounds(), mx=(e.clientX - (b.left+b.width/2))/10, my=(e.clientY - (b.top+b.height/2))/10;
    btn.style.setProperty('--mx', mx+'px'); btn.style.setProperty('--my', my+'px');
  });
  btn.addEventListener('pointerleave', ()=>{ btn.style.setProperty('--mx','0px'); btn.style.setProperty('--my','0px'); });
});

/* ========= IntersectionObserver reveal ========= */
const io = new IntersectionObserver((entries)=>{
  entries.forEach(el=>{
    if(el.isIntersecting){ el.target.classList.add('show'); io.unobserve(el.target); }
  });
},{threshold:.16});
document.querySelectorAll('.reveal').forEach(e=>io.observe(e));

/* ========= Tilt on cards ========= */
document.querySelectorAll('.tilt').forEach(card=>{
  const max=10; let hovered=false;
  const set=(rx,ry)=> card.style.transform=`rotateX(${rx}deg) rotateY(${ry}deg)`;
  card.addEventListener('pointermove', e=>{
    const r = card.getBoundingClientRect();
    const px = (e.clientX - r.left)/r.width, py=(e.clientY - r.top)/r.height;
    const ry = lerp(-max, max, px), rx = lerp(max,-max, py);
    set(rx,ry);
  });
  card.addEventListener('pointerenter', ()=>{ hovered=true; card.style.transition='transform .05s'; });
  card.addEventListener('pointerleave', ()=>{ hovered=false; card.style.transition='transform .25s ease'; set(0,0); });
  card.addEventListener('blur', ()=>{set(0,0)});
});

/* ========= SVG rings animate ========= */
document.querySelectorAll('.meter').forEach(c=>{
  const r = +c.getAttribute('r'), C = 2*Math.PI*r;
  c.style.strokeDasharray = C;
  c.style.strokeDashoffset = C;
  const val = Math.min(100, Math.max(0, +c.dataset.val));
  const run = ()=>{
    const target = C * (1 - val/100);
    c.animate([{strokeDashoffset:C},{strokeDashoffset:target}], {duration:1200, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards'});
  };
  // trigger on first reveal
  const parent = c.closest('.ring');
  const obs = new IntersectionObserver(es=>{es.forEach(en=>{ if(en.isIntersecting){ run(); obs.disconnect(); } })},{threshold:.4});
  obs.observe(parent);
});

/* ========= Canvas particles ========= */
(function(){
  const canvas = document.getElementById('fx'), ctx = canvas.getContext('2d');
  let dpr, W, H, particles=[], lines= [];
  const conf = { count: 120, link: 110, speed:.35 };
  function resize(){
    dpr = Math.min(2, window.devicePixelRatio || 1);
    W = canvas.width = innerWidth * dpr;
    H = canvas.height = innerHeight * dpr;
    canvas.style.width = innerWidth+'px'; canvas.style.height = innerHeight+'px';
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener('resize', resize); resize();

  function spawn(){
    particles = Array.from({length:conf.count}, ()=>({
      x: Math.random()*innerWidth,
      y: Math.random()*innerHeight,
      vx: (Math.random()-.5)*conf.speed,
      vy: (Math.random()-.5)*conf.speed,
      r: Math.random()*1.5+0.4,
      h: 350 + Math.random()*20, // red-ish hue range
      a: .25 + Math.random()*.35
    }));
  }
  spawn();

  let mx= -9999, my= -9999;
  window.addEventListener('pointermove', e=>{ mx=e.clientX; my=e.clientY; });
  window.addEventListener('pointerleave', ()=>{ mx=-9999; my=-9999; });

  function step(){
    ctx.clearRect(0,0,innerWidth,innerHeight);
    // update & draw particles
    for(const p of particles){
      p.x += p.vx; p.y += p.vy;
      if(p.x<0||p.x>innerWidth) p.vx*=-1;
      if(p.y<0||p.y>innerHeight) p.vy*=-1;

      // mouse attraction
      const dx = mx - p.x, dy = my - p.y;
      const dist2 = dx*dx+dy*dy, maxR = 120;
      if(dist2 < maxR*maxR){
        p.vx += dx * 0.00008;
        p.vy += dy * 0.00008;
      }

      ctx.beginPath();
      ctx.fillStyle = `hsla(${p.h}, 95%, 55%, ${p.a})`;
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fill();
    }
    // lines
    for(let i=0;i<particles.length;i++){
      for(let j=i+1;j<particles.length;j++){
        const a=particles[i], b=particles[j];
        const dx=a.x-b.x, dy=a.y-b.y;
        const d=Math.hypot(dx,dy);
        if(d<conf.link){
          const o = 1 - d/conf.link;
          ctx.strokeStyle = `rgba(255,31,67,${o*.15})`;
          ctx.lineWidth = 1;
          ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
        }
      }
    }
    requestAnimationFrame(step);
  }
  step();

  // Easter egg: press G to boost visuals
  window.addEventListener('keydown', (e)=>{
    if(e.key.toLowerCase() === 'g'){
      conf.count = Math.min(220, conf.count+30);
      conf.link += 10; spawn();
    }
  });
})();

/* ========= Form demo (no backend) ========= */
document.querySelector('form')?.addEventListener('submit', e=>{
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.currentTarget).entries());
  const ok = data.nom && data.mail && data.msg && /\S+@\S+\.\S+/.test(data.mail);
  const btn = e.currentTarget.querySelector('button[type="submit"]');
  btn.disabled = true;
  btn.animate([{transform:'scale(1)'},{transform:'scale(1.04)'}],{duration:150,fill:'forwards'});
  setTimeout(()=>{
    alert(ok ? '✅ Message émulé ! (aucune donnée envoyée — démo locale)' : '⚠️ Merci de compléter les champs requis avec un email valide.');
    btn.disabled = false;
  }, 450);
});

/* ========= Smooth anchor (native-ish) ========= */
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click', e=>{
    const id = a.getAttribute('href').slice(1), target = document.getElementById(id);
    if(target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
  });
});
</script>
</body>
</html>
